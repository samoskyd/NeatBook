@model NeatBookMVC.Models.Chapters.ChapterDetailsViewModel

<h2>Chapter Details</h2>

<div>
    <h3>@Model.Name</h3>
    @if (!string.IsNullOrEmpty(Model.Text))
    {
        <div>
            <iframe id="pdfViewer" src="@Model.Text" width="100%" height="600"></iframe>
        </div>
        <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
        <script>
            var pdfjsLib = window['pdfjs-dist/build/pdf'];

            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js';

            var pdfViewer = document.getElementById('pdfViewer');

            pdfjsLib.getDocument(pdfViewer.src).then(function (pdf) {
                pdf.getPage(1).then(function (page) {
                    var scale = 1.5;
                    var viewport = page.getViewport({ scale: scale });

                    var canvas = document.createElement('canvas');
                    var context = canvas.getContext('2d');
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;

                    var container = pdfViewer.parentNode;
                    container.appendChild(canvas);

                    page.render({
                        canvasContext: context,
                        viewport: viewport
                    });
                });
            });
        </script>

    }
    else
    {
        <p>the chapter doesn't have text'</p>
    }
    <a asp-controller="Chapters" asp-action="NextChapterDetails" asp-route-id="@Model.Id" class="btn btn-primary">Read Next</a>
    @if (Model.Order != 1)
    {
        <a asp-controller="Chapters" asp-action="PreviousChapterDetails" asp-route-id="@Model.Id" class="btn btn-primary">Read Previous</a>
    }
</div>
